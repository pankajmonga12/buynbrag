$(function(){$("#tab").tabs({select:function(c,d){var b=d.index;populatePromotion(b)}});$("input[type='checkbox']").click(function(){var d=$("#baseurl").val();var c=$(this).val();var b=c.split("_");if($(this).is(":checked")==true){status=0}else{status=1}$.ajax({url:d+"index.php/promote/changeStatus/"+b[1]+"/"+status+"/"+b[0]+"",success:function(e){}})});$(".drop").selectbox();var a=0;$("#scrollLeftButton").click(function(){if(a<=0){return}a=a-400;$("#sliderParentDiv").animate({scrollLeft:a},840)});$("#scrollRightButton").click(function(){maxScroll=parseInt($("#slider").css("width"))-400;if(a>=maxScroll){a=maxScroll;return}a=a+400;$("#sliderParentDiv").animate({scrollLeft:a},840)});$("#save_promote_form").click(function(){saveData()})});function selectCategory(c){var b=$("#baseurl").val();var a=$("#store_id").val();$.ajax({async:false,url:b+"index.php/promote/promoteContents?typeID="+c+"&store_id="+a,success:function(d){$("#remoteCategoriesSelected").html(d)}})}function selectPromotionApplies(c){var b=$("#baseurl").val();var a=$("#store_id").val();$.ajax({async:false,url:b+"index.php/promote/promoteApplies?typeID="+c+"&store_id="+a,success:function(d){$("#promotionAppliesArea").html(d)}})}function selectPromotionAppliesRight(c){var b=$("#baseurl").val();var a=$("#store_id").val();$.ajax({async:false,url:b+"index.php/promote/promoteRightCategoriesApplies?typeID="+c+"&store_id="+a,success:function(d){$("#promote_right_panel").html(d)}})}function selectPromotionType(a){var c=$("#baseurl").val();var b=$("#store_id").val();$.ajax({async:false,url:c+"index.php/promote/promoteSelectedType?typeID="+a,success:function(d){$("#promotionTypeArea").html(d)}})}function selectPromotionExpires(a){var c=$("#baseurl").val();var b=$("#store_id").val();$.ajax({async:false,url:c+"index.php/promote/promotePromotionExpires?typeID="+a,success:function(d){$("#promotionExpiresArea").html(d)}})}function addCategoryToPanelcall(d,e){var c="";var b=$("#hiddenCounter").val();var a="'single'";c='<div id="deleteAddedCategoryId'+b+'"><div class="sep">&nbsp;</div><li><div class="text">'+d+'</div><div class="selectedCategoryCloseIcon" onClick="deleteAddedCategory('+b+","+a+')">&nbsp;</div></li><input type="hidden" id="selectedCategoryId_'+b+'" name="selectedCategoryId_'+b+'"  value="'+e+'" /></div>';$("#appliesCategoriesSection").html(c);$("#hiddenCounter").val(1)}function addMultipleCategoryToPanelcall(f,g){var e="";var a=$("#hiddenRightTransparentHeight").val();var d=$("#hiddenCounter").val();var c="'multiple'";$("#hiddenRightTransparentHeight").val(parseInt(a)+45);e='<div id="deleteAddedCategoryId'+d+'"><div class="sep">&nbsp;</div><li><div class="text">'+f+'</div><div class="selectedCategoryCloseIcon" onClick="deleteAddedCategory('+d+","+c+')">&nbsp;</div></li><input type="hidden" id="selectedMultiCategoryId_'+d+'" name="selectedMultiCategoryId_'+d+'" value="'+g+'" /></div>';$("#appliesCategoriesSection").append(e);var b=$("#hiddenRightTransparentHeight").val();$(".rightTransparent").css("height",b+"px");$("#hiddenCounter").val(parseInt(d)+1)}function saveData(){var p=$("#baseurl").val();var a=$("#store_id").val();var m=new Array();var l="";var u=new Object();var n=$("#selectedCategory").val();u.discount_on_type=0;var t=$("#hiddenFieldDiv1").val();u.hiddenFieldDiv=t;if(n=="Single Product"){u.image_1=$("#img_1").attr("alt");u.discount_on_type=1}else{if(n=="Multiple Products"){for(var q=1;q<=t;q++){m[q]=$("#img_"+q).attr("alt");u["image_"+q]=m[q];u.discount_on_type=1}}else{if(n=="Single Category"){var k=$("#hiddenCounter").val();u.categoryCounter=k;u.category_1=$("#selectedCategoryId_1").val();u.discount_on_type=2}else{if(n=="Multiple Categories"){var k=$("#hiddenCounter").val();u.categoryCounter=k;for(var o=0;o<k;o++){u["category_"+o]=$("#selectedMultiCategoryId_"+o).val()}u.discount_on_type=2}}}}var h=$("#single_selected_img1").html();var s=$("#multiple_selected_img1").html();if(h==""||s==""){l="Please Select atleast one image\n";$(".addProductHere").addClass("red_border")}else{$(".addProductHere").removeClass("red_border")}var c=$("#promotion_type").val();u.promotion_type=c;if(c==1){var e=$("#rupeeValue").val();if(isNaN(e)||e==""){l=l+"Please correct promotion type value \n"}u.discountValue=e}else{var e=$("#percentageOfferValue").val();if(isNaN(e)||e==""){l=l+"Please correct promotion type value \n"}u.discountValue=e}var d=$("#promotion_expires").val();u.promotion_expires=d;if(d==1){var f=$("#promotionExpiresDate").val();if(isNaN(f)||(f.charAt(0)==" ")||f==""){l=l+"Please enter numeric date\n"}u.promotionExpiresDate=f;var b=$("#promotionExpiresMonth").val();if(isNaN(b)||(b.charAt(0)==" ")||b==""){l=l+"Please enter numeric month\n"}u.promotionExpiresMonth=b;var r=$("#promotionExpiresYear").val();if(isNaN(r)||(r.charAt(0)==" ")||r==""){l=l+"Please enter numeric year\n"}u.promotionExpiresYear=r}else{if(d==2){var g=$("#no_of_uses").val();if(isNaN(g)||(g.charAt(0)==" ")||g==""){l=l+"Please enter numeric no. of uses\n"}u.no_of_uses=g}}if(l!=""){alert(l);return false}$.post(p+"index.php/promote/savepromotedata?store_id="+a,{obj:u},function(j){window.location.href=p+"index.php/promote/promote_discount_summary/"+a},"text");return false}function populatePromotion(a){var c=$("#baseurl").val();var b=$("#store_id").val();$.ajax({url:c+"index.php/promote/promotionAjax?status="+a+"&store_id="+b+"",success:function(d){$("#parent_promotion_"+a).html(d)}});return false}function searchPromotions(a){var d=$("#baseurl").val();var c=$("#store_id").val();var b=$("#search_"+a).val();$.ajax({url:d+"index.php/promote/searchPromotionAjax?status="+a+"&store_id="+c+"&s_val="+b+"",success:function(e){$("#parent_promotion_"+a).html(e)}});return false}function deletePromote(h,a){var g=$("#baseurl").val();var f=$("#store_id").val();var c=$("#tab").tabs("option","selected");var e=$($("#tab li")[c]).text();var b=0;if(e=="All"){b=0}else{if(e=="Rupee Off"){b=2}else{b=1}}var d=$("#search_"+b).val();$.ajax({url:g+"index.php/promote/deletepromote?status="+b+"&store_id="+f+"&type_to="+h+"&pro="+d+"&item_id="+a+"",success:function(j){}});return false}function editPromote(h,g){var f=$("#baseurl").val();var e=$("#store_id").val();var b=$("#tab").tabs("option","selected");var d=$($("#tab li")[b]).text();var a=0;if(d=="All"){a=0}else{if(d=="Rupee Off"){a=2}else{a=1}}var c=$("#search_"+a).val();alert("in");$.ajax({url:f+"index.php/promote/editpromote?status="+a+"&store_id="+e+"&type_to="+h+"&pro="+c+"&id="+g+"",success:function(j){}});return false}function addtolist(e){$("#addTextContainer").hide();var g=e;var f=$("#productType").val();var h=$("#baseurl").val();var j=$("#store_id").val();var d=h+"assets/images/stores/"+j+"/"+e+"/img1_92x77.jpg";if(f=="multiple"){var b=parseInt(document.getElementById("hiddenFieldDiv1").value);if(b<11){i=b+1;$("#multiple_selected_img"+i).append($(document.createElement("img")).attr({src:d,id:"img_"+i,height:"94",width:"94",alt:g})).show();$("#multiple_selected_img"+i).css("background-color","#fff");document.getElementById("hiddenFieldDiv1").value=i}}else{var c=d;if(c){var k=(c.indexOf("\\")>=0?c.lastIndexOf("\\"):c.lastIndexOf("/"));var a=c.substring(k);if(a.indexOf("\\")===0||a.indexOf("/")===0){a=a.substring(1)}var d=d.replace(a,"img1_500x375.jpg")}$("#single_selected_img1").html($(document.createElement("img")).attr({src:d,id:"img_1",height:"244",width:"333",alt:g}));$("#single_selected_img1").css("background-color","#fff")}};