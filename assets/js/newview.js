function View(R,Q){function w(){y();B();O=P.find("img");L("body").append(P);if(!View._cssified){E()}View._cssified=true;x();J.sync();J.close();if(Q.preload){J.show(O.eq(0))}J._ie7=navigator.userAgent.indexOf("MSIE 7")>-1;L(window).resize(function(){J.sync()})}function x(){P.unbind("click.view").bind("click.view",F)}function y(){if(typeof R=="object"&&R.jquery){R.filter("a[href]").each(function(){if(z(this.href)||!Q.validateUrls){K.push({src:this.href,caption:this.title})}L(this).unbind("click.view").bind("click.view",A)})}else{if(L.isArray(R)){K=R}}}function z(b){return/\.(jpeg|jpg|gif|png)(\?|#)?(.*)?$/ig.test(b)}function A(b){b.preventDefault();J.show(this.href);J.open()}function B(){if(L.isArray(K)){for(var g=0,e;e=K[g];++g){var j=null;var i=L('<li class="loading"/>');if(typeof e=="object"&&e.src){j=e.src}else{if(typeof e=="string"){j=e}}var h=new Image;h.onload=function(){J.sync();L(this).css({visibility:"visible"}).parents("li").removeClass("loading")};L(h).css({visibility:"hidden"});L(h).attr("data-src",j);if(e.caption){i.addClass("has-caption").append(L('<span class="caption" />').text(e.caption))}if(g==0){i.addClass("first")}if(g==K.length-1){i.addClass("last")}N.append(i.append(L("<div/>").append(L("<span/>").append(h))))}}}function C(b){if(!b.src){L(b).attr("src",L(b).attr("data-src"))}}function D(d,c){C(d.find("img"));d.nextAll().slice(0,c).add(d.prevAll().slice(0,c)).find("img").each(function(f,e){C(e)})}function E(){var b=L("<style />");L("head").prepend(b);var l=document.styleSheets[0];for(g in Q.css){var k="";for(name in Q.css[g]){k+=name+":"+Q.css[g][name]+";"}var j=g.split(",");for(var i=0,g;g=j[i];++i){if(l.insertRule){l.insertRule(g+"{"+k+"}",l.cssRules.length)}else{l.addRule(g,k)}}}}function F(b){b.preventDefault();$t=L(b.target);if(N.find("li").length<=1){J.close()}if($t.is("img")){if($t.parents("li").is(".current")){J.next()}else{J.show($t)}}else{if($t.is("li>div,li")){if($t.parents("li").is(".next")||$t.is(".next")){J.next()}else{if($t.parents("li").is(".previous")||$t.is(".previous")){J.prev()}else{J.close()}}}else{J.close()}}}function G(b){L.each(Q.keys,function(a,f){for(var e=0;e<f.length;++e){if(b.keyCode==f[e]){J[a]()}}})}function H(d){var c='[src="'+d+'"],[data-src="'+d+'"]';return $i=O.find(c).add(O.filter(c)).eq(0)}var P,O,N,M,L=jQuery,K=[],J=this,I=L("body");P=L('<div class="viewer"><ul></ul><a href="#" class="close" title="Close this viewer">&times;</a></div>').hide();N=P.find("ul");var Q=L.extend({css:{"body.viewing":{overflow:"hidden"},".viewer *, .viewer":{margin:0,padding:0,border:0},".viewer":{"background-color":"#222",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#D8000000,endColorstr=#D8000000)","background-color":"rgba(0,0,0,0.85)",position:"fixed",right:0,top:0,left:0,bottom:0,display:"block",overflow:"hidden","z-index":Math.ceil((new Date).getTime()/10000000),height:"100%",width:"100%"},".viewer li.current + .loading":{"background-position":"0 center"},".viewer ul":{display:"block",height:"100%",width:"100%","white-space":"nowrap"},".viewer li":{height:"100%",width:"0%",overflow:"hidden",display:"none","float":"left","text-align":"center",position:"relative"},".viewer li.previous, .viewer li.next":{cursor:"pointer",display:"block"},".viewer li>div":{left:"10px",right:"10px",bottom:"10px",top:"10px",display:"block","text-align":"center",position:"absolute"},".viewer li.has-caption>div":{bottom:"5em"},".viewer li.loading>div":{background:"url(data:image/gif;base64,R0lGODlhDAAMAPIGAFxcXE5OTlZWVkpKSkZGRkJCQgAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFHgAGACwAAAAADAAMAAADLmhaIRJFSQHEGFRMQKQhlVFwngIyWqk8lqpgrYs1rvGMXXnapASmPAsm5EHdJAkAIfkEBR4AAQAsBgABAAMABQAAAgaEbwISHAUAIfkEBR4AAQAsBgADAAUAAwAAAgOEj1kAIfkEBR4AAgAsBgAGAAUAAwAAAgYMDmInegUAIfkEBR4AAQAsBgAGAAMABQAAAgOEj1kAIfkEBR4AAgAsAwAGAAMABQAAAgaUchDAzQUAIfkEBR4AAQAsAQAGAAUAAwAAAgOEj1kAIfkEBR4AAgAsAQADAAUAAwAAAgYEImKnGwUAIfkEBR4AAQAsAwABAAMABQAAAgOEj1kAOw%3D%3D) center center no-repeat"},".viewer li.loading.next>div":{"background-position":"0 center"},".viewer li.loading.previous>div":{"background-position":"right center"},".viewer .close":{color:"#fff","text-decoration":"none","font-weight":"bold","font-size":"20px",position:"absolute",right:"15px",top:"15px",cursor:"pointer",display:"block",opacity:0.6},".viewer .close:hover":{opacity:1},".viewer img":{"max-width":"100%","max-height":"100%",cursor:"pointer",position:"relative",height:"auto",width:"auto","vertical-align":"middle","-ms-interpolation-mode":"bicubic"},".viewer .caption":{color:"#aaa","text-shadow":"0 1px 2px rgba(0,0,0,0.8)","line-height":"5em",position:"absolute",bottom:"0",left:"0",right:"0",visibility:"hidden"},".viewer li.current .caption":{visibility:"visible"},".viewer li.previous":{width:"10%"},".viewer li.current":{width:"80%",display:"block"},".viewer li.first.current":{"margin-left":"10%"},".viewer li.last.current":{"margin-right":"10%"},".viewer li.next":{width:"10%"},".viewer li.previous>div":{left:"-50%",right:"50%"},".viewer li.next>div":{right:"-50%",left:"50%"},".viewer .next img, .viewer .previous img, .viewer .current img":{"-webkit-transform":"translateZ(0)"}},keys:{close:[27],prev:[37,188],next:[39,190]},loadAhead:1,preload:false,validateUrls:true},Q);this.next=function(){this.show(M.next().find("img"))};this.prev=function(){this.show(M.prev().find("img"))};this.close=function(){P.hide();L(document).unbind("keyup.view");I.removeClass("viewing")};this.open=function(){P.show();L(document).bind("keyup.view",G);I.addClass("viewing");this.sync()};this.show=function(b){if(typeof b=="string"){b=H(b)}if(b.constructor==L&&b.length>0){P.find("li").removeClass("current next previous").removeAttr("title");M=$parent=b.parents("li").addClass("current");M.next().addClass("next").attr("title","Next");M.prev().addClass("previous").attr("title","Previous");this.sync();D(M,Q.loadAhead)}};this.sync=function(){var d=N.find("li.current>div").height();var c=d+"px";N.find("li>div>span").each(function(){L(this).css({"line-height":c})});if(J._ie7){O.css({"max-height":c});O.each(function(){var a=L(this);a.css({top:(d-a.height())/2+"px"})})}};this.next=function(){J.show(M.next().find("img"))};this.prev=function(){J.show(M.prev().find("img"))};w()}View._version="1.02";(function(){var d=jQuery,c=document.getElementsByTagName("script");if(c[c.length-1].src.indexOf("?auto")>-1){d().ready(function(){var a=d("a.view[href]");var f={};a.each(function(){var g=this.rel;if(g){if(!f[g]){f[g]=[]}f[g].push(this)}else{new View(d(this))}});for(var e in f){new View(d(f[e]))}})}})();function View(k,g){var o,q,a,f,c=jQuery,h=[],j=this,b=c("body");o=c('<div class="viewer"><ul></ul><a href="#" class="close" title="Close this viewer">&times;</a></div>').hide();a=o.find("ul");var g=c.extend({css:{"body.viewing":{overflow:"hidden"},".viewer *, .viewer":{margin:0,padding:0,border:0},".viewer":{"background-color":"#222",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#D8000000,endColorstr=#D8000000)","background-color":"rgba(0,0,0,0.85)",position:"fixed",right:0,top:0,left:0,bottom:0,display:"block",overflow:"hidden","z-index":Math.ceil(new Date().getTime()/10000000),height:"100%",width:"100%"},".viewer li.current + .loading":{"background-position":"0 center"},".viewer ul":{display:"block",height:"100%",width:"100%","white-space":"nowrap"},".viewer li":{height:"100%",width:"0%",overflow:"hidden",display:"none","float":"left","text-align":"center",position:"relative"},".viewer li.previous, .viewer li.next":{cursor:"pointer",display:"block"},".viewer li>div":{left:"10px",right:"10px",bottom:"10px",top:"10px",display:"block","text-align":"center",position:"absolute"},".viewer li.has-caption>div":{bottom:"5em"},".viewer li.loading>div":{background:"url(data:image/gif;base64,R0lGODlhDAAMAPIGAFxcXE5OTlZWVkpKSkZGRkJCQgAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFHgAGACwAAAAADAAMAAADLmhaIRJFSQHEGFRMQKQhlVFwngIyWqk8lqpgrYs1rvGMXXnapASmPAsm5EHdJAkAIfkEBR4AAQAsBgABAAMABQAAAgaEbwISHAUAIfkEBR4AAQAsBgADAAUAAwAAAgOEj1kAIfkEBR4AAgAsBgAGAAUAAwAAAgYMDmInegUAIfkEBR4AAQAsBgAGAAMABQAAAgOEj1kAIfkEBR4AAgAsAwAGAAMABQAAAgaUchDAzQUAIfkEBR4AAQAsAQAGAAUAAwAAAgOEj1kAIfkEBR4AAgAsAQADAAUAAwAAAgYEImKnGwUAIfkEBR4AAQAsAwABAAMABQAAAgOEj1kAOw%3D%3D) center center no-repeat"},".viewer li.loading.next>div":{"background-position":"0 center"},".viewer li.loading.previous>div":{"background-position":"right center"},".viewer .close":{color:"#fff","text-decoration":"none","font-weight":"bold","font-size":"20px",position:"absolute",right:"15px",top:"15px",cursor:"pointer",display:"block",opacity:0.6},".viewer .close:hover":{opacity:1},".viewer img":{"max-width":"100%","max-height":"100%",cursor:"pointer",position:"relative",height:"auto",width:"auto","vertical-align":"middle","-ms-interpolation-mode":"bicubic"},".viewer .caption":{color:"#aaa","text-shadow":"0 1px 2px rgba(0,0,0,0.8)","line-height":"5em",position:"absolute",bottom:"0",left:"0",right:"0",visibility:"hidden"},".viewer li.current .caption":{visibility:"visible"},".viewer li.previous":{width:"10%"},".viewer li.current":{width:"80%",display:"block"},".viewer li.first.current":{"margin-left":"10%"},".viewer li.last.current":{"margin-right":"10%"},".viewer li.next":{width:"10%"},".viewer li.previous>div":{left:"-50%",right:"50%"},".viewer li.next>div":{right:"-50%",left:"50%"},".viewer .next img, .viewer .previous img, .viewer .current img":{"-webkit-transform":"translateZ(0)"}},keys:{close:[27],prev:[37,188],next:[39,190]},loadAhead:1,preload:false,validateUrls:true},g);this.next=function(){this.show(f.next().find("img"))};this.prev=function(){this.show(f.prev().find("img"))};this.close=function(){o.hide();c(document).unbind("keyup.view");b.removeClass("viewing")};this.open=function(){o.show();c(document).bind("keyup.view",v);b.addClass("viewing");this.sync()};this.show=function(w){if(typeof w=="string"){w=s(w)}if(w.constructor==c&&w.length>0){o.find("li").removeClass("current next previous").removeAttr("title");f=$parent=w.parents("li").addClass("current");f.next().addClass("next").attr("title","Next");f.prev().addClass("previous").attr("title","Previous");this.sync();t(f,g.loadAhead)}};this.sync=function(){var x=a.find("li.current>div").height();var w=x+"px";a.find("li>div>span").each(function(){c(this).css({"line-height":w})});if(j._ie7){q.css({"max-height":w});q.each(function(){var y=c(this);y.css({top:((x-y.height())/2+"px")})})}};this.next=function(){j.show(f.next().find("img"))};this.prev=function(){j.show(f.prev().find("img"))};function s(x){var w='[src="'+x+'"],[data-src="'+x+'"]';return $i=q.find(w).add(q.filter(w)).eq(0)}function v(w){c.each(g.keys,function(z,y){for(var x=0;x<y.length;++x){if(w.keyCode==y[x]){j[z]()}}})}function n(w){w.preventDefault();$t=c(w.target);if(a.find("li").length<=1){j.close()}if($t.is("img")){if($t.parents("li").is(".current")){j.next()}else{j.show($t)}}else{if($t.is("li>div,li")){if($t.parents("li").is(".next")||$t.is(".next")){j.next()}else{if($t.parents("li").is(".previous")||$t.is(".previous")){j.prev()}else{j.close()}}}else{j.close()}}}function e(){var w=c("<style />");c("head").prepend(w);var A=document.styleSheets[0];for(B in g.css){var z="";for(name in g.css[B]){z+=name+":"+g.css[B][name]+";"}var y=B.split(",");for(var x=0,B;B=y[x];++x){if(A.insertRule){A.insertRule((B+"{"+z+"}"),A.cssRules.length)}else{A.addRule(B,z)}}}}function t(w,x){d(w.find("img"));w.nextAll().slice(0,x).add(w.prevAll().slice(0,x)).find("img").each(function(z,y){d(y)})}function d(w){if(!w.src){c(w).attr("src",c(w).attr("data-src"))}}function l(){if(c.isArray(h)){for(var x=0,w;w=h[x];++x){var y=null;var A=c('<li class="loading"/>');if(typeof w=="object"&&w.src){y=w.src}else{if(typeof w=="string"){y=w}}var z=new Image();z.onload=function(){j.sync();c(this).css({visibility:"visible"}).parents("li").removeClass("loading")};c(z).css({visibility:"hidden"});c(z).attr("data-src",y);if(w.caption){A.addClass("has-caption").append(c('<span class="caption" />').text(w.caption))}if(x==0){A.addClass("first")}if(x==(h.length-1)){A.addClass("last")}a.append(A.append(c("<div/>").append(c("<span/>").append(z))))}}}function r(w){w.preventDefault();j.show(this.href);j.open()}function m(w){return/\.(jpeg|jpg|gif|png)(\?|#)?(.*)?$/ig.test(w)}function i(){if(typeof k=="object"&&k.jquery){k.filter("a[href]").each(function(){if(m(this.href)||!g.validateUrls){h.push({src:this.href,caption:this.title})}c(this).unbind("click.view").bind("click.view",r)})}else{if(c.isArray(k)){h=k}}}function u(){o.unbind("click.view").bind("click.view",n)}function p(){i();l();q=o.find("img");c("body").append(o);if(!View._cssified){e()}View._cssified=true;u();j.sync();j.close();if(g.preload){j.show(q.eq(0))}j._ie7=navigator.userAgent.indexOf("MSIE 7")>-1;c(window).resize(function(){j.sync()})}p()}View._version="1.02";(function(){var b=jQuery,a=document.getElementsByTagName("script");if(a[a.length-1].src.indexOf("?auto")>-1){b().ready(function(){var e=b("a.view[href]");var d={};e.each(function(){var f=this.rel;if(f){if(!d[f]){d[f]=[]}d[f].push(this)}else{new View(b(this))}});for(var c in d){new View(b(d[c]))}})}})();